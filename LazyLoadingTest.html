<!DOCTYPE html>
<html lang="en" style="background-color: #fafafa">
<head>
    <meta charset="UTF-8">
    <title>LazyLoadingTest</title>
    <meta name="viewport"
          content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <link rel="stylesheet prefetch"
          href="https://fonts.googleapis.com/css?family=Roboto:400,100,300,500,700,900|RobotoDraft:400,100,300,500,700,900|Material+Icons">
    <link rel="stylesheet prefetch" href="css/font-awesome.min.css">
    <link rel="stylesheet prefetch" href="css/font-awesome-animation.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body style="background-color: #fafafa">
<div class="page">
    <div class="subtitle">
        <div class="page-back"><a href="#Home"><i class="fa fa-angle-left" aria-hidden="true"></i></a></div>
        <div class="page-title">Lazy Loading</div>
        <div class="extension"></div>
        <div class="desc">
            <p>图片懒加载</p>
            <p>此例请用移动端查看</p>
        </div>
    </div>
    <div class="viewport" style="height: 567px">
        <div class="lazyload-card">
            <div class="lazyload-imgWrapper">
                <img class="lazyload-img" src="/Bill.io/image/lzlo1.jpg">
                <div class="lazyload-default">
                    <i class="fa fa-spinner fa-spin" aria-hidden="true"></i>
                </div>
            </div>
            <div class="lazyload-actbar">
                <span><i class="fa fa-heart" aria-hidden="true"></i> 11</span>
                <span><i class="fa fa-share-alt" aria-hidden="true"></i> 21</span>
            </div>
        </div>
        <div class="lazyload-card">
            <div class="lazyload-imgWrapper">
                <img class="lazyload-img" src="/Bill.io/image/lzlo2.jpg">
                <div class="lazyload-default">
                    <i class="fa fa-spinner fa-spin" aria-hidden="true"></i>
                </div>
            </div>
            <div class="lazyload-actbar">
                <span><i class="fa fa-heart" aria-hidden="true"></i> 32</span>
                <span><i class="fa fa-share-alt" aria-hidden="true"></i> 2</span>
            </div>
        </div>
        <div class="lazyload-card">
            <div class="lazyload-imgWrapper">
                <img class="lazyload-img" src="/Bill.io/image/lzlo3.jpg">
                <div class="lazyload-default">
                    <i class="fa fa-spinner fa-spin" aria-hidden="true"></i>
                </div>
            </div>
            <div class="lazyload-actbar">
                <span><i class="fa fa-heart" aria-hidden="true"></i> 16</span>
                <span><i class="fa fa-share-alt" aria-hidden="true"></i> 4</span>
            </div>
        </div>
        <div class="lazyload-card">
            <div class="lazyload-imgWrapper">
                <img class="lazyload-img" src="/Bill.io/image/lzlo4.jpg">
                <div class="lazyload-default">
                    <i class="fa fa-spinner fa-spin" aria-hidden="true"></i>
                </div>
            </div>
            <div class="lazyload-actbar">
                <span><i class="fa fa-heart" aria-hidden="true"></i> 47</span>
                <span><i class="fa fa-share-alt" aria-hidden="true"></i> 1</span>
            </div>
        </div>
        <div class="lazyload-card">
            <div class="lazyload-imgWrapper">
                <img class="lazyload-img" src="/Bill.io/image/lzlo5.jpg">
                <div class="lazyload-default">
                    <i class="fa fa-spinner fa-spin" aria-hidden="true"></i>
                </div>
            </div>
            <div class="lazyload-actbar">
                <span><i class="fa fa-heart" aria-hidden="true"></i> 12</span>
                <span><i class="fa fa-share-alt" aria-hidden="true"></i> 8</span>
            </div>
        </div>
        <div class="lazyload-card">
            <div class="lazyload-imgWrapper">
                <img class="lazyload-img" src="/Bill.io/image/lzlo6.jpg">
                <div class="lazyload-default">
                    <i class="fa fa-spinner fa-spin" aria-hidden="true"></i>
                </div>
            </div>
            <div class="lazyload-actbar">
                <span><i class="fa fa-heart" aria-hidden="true"></i> 7</span>
                <span><i class="fa fa-share-alt" aria-hidden="true"></i> 19</span>
            </div>
        </div>
        <div class="lazyload-card">
            <div class="lazyload-imgWrapper">
                <img class="lazyload-img" src="/Bill.io/image/lzlo7.jpg">
                <div class="lazyload-default">
                    <i class="fa fa-spinner fa-spin" aria-hidden="true"></i>
                </div>
            </div>
            <div class="lazyload-actbar">
                <span><i class="fa fa-heart" aria-hidden="true"></i> 8</span>
                <span><i class="fa fa-share-alt" aria-hidden="true"></i> 2</span>
            </div>
        </div>
        <div class="lazyload-card">
            <div class="lazyload-imgWrapper">
                <img class="lazyload-img" src="/Bill.io/image/lzlo8.jpg">
                <div class="lazyload-default">
                    <i class="fa fa-spinner fa-spin" aria-hidden="true"></i>
                </div>
            </div>
            <div class="lazyload-actbar">
                <span><i class="fa fa-heart" aria-hidden="true"></i> 22</span>
                <span><i class="fa fa-share-alt" aria-hidden="true"></i> 1</span>
            </div>
        </div>
        <div class="lazyload-card">
            <div class="lazyload-imgWrapper">
                <img class="lazyload-img" src="/Bill.io/image/lzlo9.jpg">
                <div class="lazyload-default">
                    <i class="fa fa-spinner fa-spin" aria-hidden="true"></i>
                </div>
            </div>
            <div class="lazyload-actbar">
                <span><i class="fa fa-heart" aria-hidden="true"></i> 18</span>
                <span><i class="fa fa-share-alt" aria-hidden="true"></i> 8</span>
            </div>
        </div>
        <div class="lazyload-card">
            <div class="lazyload-imgWrapper">
                <img class="lazyload-img" src="/Bill.io/image/lzlo10.jpg">
                <div class="lazyload-default">
                    <i class="fa fa-spinner fa-spin" aria-hidden="true"></i>
                </div>
            </div>
            <div class="lazyload-actbar">
                <span><i class="fa fa-heart" aria-hidden="true"></i> 7</span>
                <span><i class="fa fa-share-alt" aria-hidden="true"></i> 3</span>
            </div>
        </div>
        <div class="lazyload-card">
            <div class="lazyload-imgWrapper">
                <img class="lazyload-img" src="/Bill.io/image/lzlo11.jpg">
                <div class="lazyload-default">
                    <i class="fa fa-spinner fa-spin" aria-hidden="true"></i>
                </div>
            </div>
            <div class="lazyload-actbar">
                <span><i class="fa fa-heart" aria-hidden="true"></i> 4</span>
                <span><i class="fa fa-share-alt" aria-hidden="true"></i> 9</span>
            </div>
        </div>
        <div class="lazyload-card">
            <div class="lazyload-imgWrapper">
                <img class="lazyload-img" src="/Bill.io/image/lzlo12.jpg">
                <div class="lazyload-default">
                    <i class="fa fa-spinner fa-spin" aria-hidden="true"></i>
                </div>
            </div>
            <div class="lazyload-actbar">
                <span><i class="fa fa-heart" aria-hidden="true"></i> 6</span>
                <span><i class="fa fa-share-alt" aria-hidden="true"></i> 6</span>
            </div>
        </div>
    </div>
</div>
<script>
    var Bin = {
        ready: function(fn){
            if(document.attachEvent){
                document.attachEvent("onreadystatechange", function(){
                    if(document.readyState == "completed"){
                        document.detachEvent("onreadystatechange", arguments.callee);
                        fn();
                    }
                });
            }else if(document.addEventListener){
                document.addEventListener("DOMContentLoaded", function(){
                    document.removeEventListener("DOMContentLoaded", arguments.callee, false);
                    fn();
                }, false);
            }
        },

        on: function(element, type, handler, userCapture){
            if(document.attachEvent){
                element.attachEvent("on" + type, handler);
            }else if(document.addEventListener){
                element.addEventListener(type, handler, userCapture);
            }
        }
    };

    Bin.ready(function(){
        var img = document.querySelectorAll(".lazyload-img");
        for(var i= 0, len = img.length; i< len; i++){
            Bin.on(img[i], "load", function(){
                var parent = this.parentNode;
                var spin = parent.querySelector(".lazyload-default");
                spin.style.display = "none";
                this.style.display = "inline";
            }, false);
            Bin.on(img[i], "error", function(){
                alert("1");
            });
            Bin.on(img[i], "abort", function(){
                alert("2");
            });
        }
    });
</script>
</body>